<!DOCTYPE html>
<html lang="en">
<%- include('../partials/header.ejs') %>

    <body>
        <%- include('../partials/nav.ejs') %>

            <div class="detailsDiv">
                <div>
                    <h1>Blog Details</h1>
                </div>
                <div>
                    <ul>
                        <% if(blogs){ %>
                            <li>
                                <div>
                                    <h3>
                                        <%= blogs.title %>
                                    </h3>
                                    <p>
                                        <%= blogs.body %>
                                    </p>
                                </div>
                                <div>
                                <a class="delete" data-doc="<%= blogs._id %>">delete</a>
                                </div>
                                
                            </li>
                            <% }  %>
                                
                    </ul>
                </div>


            </div>


            <%- include('../partials/footer.ejs') %>

                <script>
                    const trash = document.querySelector('.delete')

                    trash.addEventListener('click', (e) => {

                        // e.preventDefault();
                        const endPoint = `/${trash.dataset.doc}`

                        fetch(endPoint, {
                            method: 'DELETE',
                        })
                            .then((response) => response.json())
                            .then((data) => window.location.href = data.redirect)
                            .catch((err) => { console.log(err) })
                    })
                </script>

    </body>

</html>